{% extends "employee_base.html" %}

{% block title %}Onboarding Assistant - Employee Portal{% endblock %}

{% block page_content %}
<div class="container-fluid py-4">
    <!-- Page Header -->
    <div class="row mb-4">
        <div class="col-12">
            <div class="d-flex justify-content-between align-items-center">
                <div>
                    <h1 class="h3 mb-1 text-light">
                        <i class="bi bi-robot me-2"></i>Onboarding Assistant
                    </h1>
                    <p class="text-muted mb-0">Your personal guide for a smooth start</p>
                </div>
                <div class="d-flex">
                    <span class="me-2">
                        <span class="badge bg-primary bg-opacity-25 text-primary">Day {{ employee['onboarding_progress']['current_day'] if employee['onboarding_progress'] else '3' }} of {{ employee['onboarding_progress']['total_days'] if employee['onboarding_progress'] else '5' }}</span>
                    </span>
                    <button class="btn btn-outline-primary btn-sm" data-bs-toggle="modal" data-bs-target="#helpModal">
                        <i class="bi bi-question-circle me-1"></i> Help
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Welcome Section -->
    <div class="row mb-4">
        <div class="col-12">
            <div class="card bg-dark bg-opacity-25 border-secondary">
                <div class="card-body text-center py-4">
                    <div class="avatar-xl bg-primary bg-opacity-10 text-primary rounded-circle mx-auto mb-3" style="width: 100px; height: 100px; line-height: 100px;">
                        <i class="bi bi-robot" style="font-size: 3rem;"></i>
                    </div>
                    <h4 class="text-light mb-2">Welcome to Your Journey, {{ user.full_name or user.username }}! ðŸ‘‹</h4>
                    <p class="text-muted mb-3">I'm here to guide you through your first days with personalized assistance</p>
                    <button class="btn btn-primary" id="startTourBtn">
                        <i class="bi bi-play-circle me-1"></i> Start Guided Tour
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Main Content Tabs -->
    <div class="row">
        <div class="col-12">
            <div class="card bg-dark bg-opacity-25 border-secondary">
                <!-- Tab Navigation -->
                <div class="card-header bg-transparent border-secondary">
                    <ul class="nav nav-tabs card-header-tabs" id="assistantTabs" role="tablist">
                        <li class="nav-item" role="presentation">
                            <button class="nav-link active" id="agenda-tab" data-bs-toggle="tab" data-bs-target="#agenda" type="button" role="tab">
                                <i class="bi bi-calendar3 me-1"></i> Today's Agenda
                            </button>
                        </li>
                        <li class="nav-item" role="presentation">
                            <button class="nav-link" id="tips-tab" data-bs-toggle="tab" data-bs-target="#tips" type="button" role="tab">
                                <i class="bi bi-lightbulb me-1"></i> Quick Tips
                            </button>
                        </li>
                        <li class="nav-item" role="presentation">
                            <button class="nav-link" id="progress-tab" data-bs-toggle="tab" data-bs-target="#progress" type="button" role="tab">
                                <i class="bi bi-check2-square me-1"></i> My Progress
                            </button>
                        </li>
                    </ul>
                </div>
                
                <!-- Tab Content -->
                <div class="card-body">
                    <div class="tab-content" id="assistantTabsContent">
                        <!-- Today's Agenda Tab -->
                        <div class="tab-pane fade show active" id="agenda" role="tabpanel">
                            <div class="list-group">
                                <div class="list-group-item bg-dark bg-opacity-25 border-secondary mb-2">
                                    <div class="d-flex align-items-center">
                                        <div class="flex-shrink-0 me-3">
                                            <div class="bg-primary bg-opacity-10 p-2 rounded-circle">
                                                <i class="bi bi-laptop text-primary"></i>
                                            </div>
                                        </div>
                                        <div class="flex-grow-1">
                                            <h6 class="mb-1 text-light">IT Setup & Access</h6>
                                            <p class="mb-0 small text-muted">9:00 AM - 10:00 AM</p>
                                            <p class="mb-0 small text-muted">Get your laptop, email, and system access</p>
                                        </div>
                                        <span class="badge bg-success bg-opacity-25 text-success">Upcoming</span>
                                    </div>
                                </div>
                                
                                <div class="list-group-item bg-dark bg-opacity-25 border-secondary mb-2">
                                    <div class="d-flex align-items-center">
                                        <div class="flex-shrink-0 me-3">
                                            <div class="bg-warning bg-opacity-10 p-2 rounded-circle">
                                                <i class="bi bi-people text-warning"></i>
                                            </div>
                                        </div>
                                        <div class="flex-grow-1">
                                            <h6 class="mb-1 text-light">Team Introduction</h6>
                                            <p class="mb-0 small text-muted">10:30 AM - 11:30 AM</p>
                                            <p class="mb-0 small text-muted">Meet your team members</p>
                                        </div>
                                        <span class="badge bg-warning bg-opacity-25 text-warning">Upcoming</span>
                                    </div>
                                </div>
                                
                                <div class="list-group-item bg-dark bg-opacity-25 border-secondary mb-2">
                                    <div class="d-flex align-items-center">
                                        <div class="flex-shrink-0 me-3">
                                            <div class="bg-info bg-opacity-10 p-2 rounded-circle">
                                                <i class="bi bi-cup-hot text-info"></i>
                                            </div>
                                        </div>
                                        <div class="flex-grow-1">
                                            <h6 class="mb-1 text-light">Lunch with Manager</h6>
                                            <p class="mb-0 small text-muted">12:30 PM - 1:30 PM</p>
                                            <p class="mb-0 small text-muted">Discuss your role and expectations</p>
                                        </div>
                                        <span class="badge bg-info bg-opacity-25 text-info">Upcoming</span>
                                    </div>
                                </div>
                                
                                <div class="list-group-item bg-dark bg-opacity-25 border-secondary">
                                    <div class="d-flex align-items-center">
                                        <div class="flex-shrink-0 me-3">
                                            <div class="bg-secondary bg-opacity-10 p-2 rounded-circle">
                                                <i class="bi bi-book text-secondary"></i>
                                            </div>
                                        </div>
                                        <div class="flex-grow-1">
                                            <h6 class="mb-1 text-light">Company Policies Training</h6>
                                            <p class="mb-0 small text-muted">2:00 PM - 3:30 PM</p>
                                            <p class="mb-0 small text-muted">Review important policies</p>
                                        </div>
                                        <span class="badge bg-secondary bg-opacity-25 text-secondary">Upcoming</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Quick Tips Tab -->
                        <div class="tab-pane fade" id="tips" role="tabpanel">
                            <div class="row g-3">
                                <div class="col-md-6">
                                    <div class="card bg-dark bg-opacity-50 border-secondary h-100">
                                        <div class="card-body">
                                            <div class="d-flex align-items-center mb-2">
                                                <div class="bg-primary bg-opacity-10 p-2 rounded-circle me-3">
                                                    <i class="bi bi-handshake text-primary"></i>
                                                </div>
                                                <h6 class="mb-0 text-light">Make Connections</h6>
                                            </div>
                                            <p class="small text-muted mb-0">Schedule 1:1s with team members this week</p>
                                        </div>
                                    </div>
                                </div>
                                
                                <div class="col-md-6">
                                    <div class="card bg-dark bg-opacity-50 border-secondary h-100">
                                        <div class="card-body">
                                            <div class="d-flex align-items-center mb-2">
                                                <div class="bg-success bg-opacity-10 p-2 rounded-circle me-3">
                                                    <i class="bi bi-book text-success"></i>
                                                </div>
                                                <h6 class="mb-0 text-light">Learn the Ropes</h6>
                                            </div>
                                            <p class="small text-muted mb-0">Review onboarding materials by Friday</p>
                                        </div>
                                    </div>
                                </div>
                                
                                <div class="col-md-6">
                                    <div class="card bg-dark bg-opacity-50 border-secondary h-100">
                                        <div class="card-body">
                                            <div class="d-flex align-items-center mb-2">
                                                <div class="bg-info bg-opacity-10 p-2 rounded-circle me-3">
                                                    <i class="bi bi-question-circle text-info"></i>
                                                </div>
                                                <h6 class="mb-0 text-light">Ask Questions</h6>
                                            </div>
                                            <p class="small text-muted mb-0">No question is too small - we're here to help</p>
                                        </div>
                                    </div>
                                </div>
                                
                                <div class="col-md-6">
                                    <div class="card bg-dark bg-opacity-50 border-secondary h-100">
                                        <div class="card-body">
                                            <div class="d-flex align-items-center mb-2">
                                                <div class="bg-warning bg-opacity-10 p-2 rounded-circle me-3">
                                                    <i class="bi bi-bullseye text-warning"></i>
                                                </div>
                                                <h6 class="mb-0 text-light">Set Goals</h6>
                                            </div>
                                            <p class="small text-muted mb-0">Schedule time with manager for 30-60-90 day goals</p>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <!-- My Progress Tab -->
                        <div class="tab-pane fade" id="progress" role="tabpanel">
                            <div class="list-group">
                                <div class="list-group-item bg-dark bg-opacity-25 border-secondary mb-2">
                                    <div class="d-flex justify-content-between align-items-center">
                                        <div class="form-check">
                                            <input class="form-check-input" type="checkbox" id="task1" checked>
                                            <label class="form-check-label text-light" for="task1">Complete new hire paperwork</label>
                                        </div>
                                        <span class="badge bg-success bg-opacity-25 text-success">Completed</span>
                                    </div>
                                </div>
                                
                                <div class="list-group-item bg-dark bg-opacity-25 border-secondary mb-2">
                                    <div class="d-flex justify-content-between align-items-center">
                                        <div class="form-check">
                                            <input class="form-check-input" type="checkbox" id="task2" checked>
                                            <label class="form-check-label text-light" for="task2">IT setup and system access</label>
                                        </div>
                                        <span class="badge bg-success bg-opacity-25 text-success">Completed</span>
                                    </div>
                                </div>
                                
                                <div class="list-group-item bg-dark bg-opacity-25 border-secondary mb-2">
                                    <div class="d-flex justify-content-between align-items-center">
                                        <div class="form-check">
                                            <input class="form-check-input" type="checkbox" id="task3" checked>
                                            <label class="form-check-label text-light" for="task3">Meet with your manager</label>
                                        </div>
                                        <span class="badge bg-success bg-opacity-25 text-success">Completed</span>
                                    </div>
                                </div>
                                
                                <div class="list-group-item bg-dark bg-opacity-25 border-secondary mb-2">
                                    <div class="d-flex justify-content-between align-items-center">
                                        <div class="form-check">
                                            <input class="form-check-input" type="checkbox" id="task4">
                                            <label class="form-check-label text-light" for="task4">Complete required training modules</label>
                                        </div>
                                        <span class="badge bg-warning bg-opacity-25 text-warning">In Progress</span>
                                    </div>
                                </div>
                                
                                <div class="list-group-item bg-dark bg-opacity-25 border-secondary mb-2">
                                    <div class="d-flex justify-content-between align-items-center">
                                        <div class="form-check">
                                            <input class="form-check-input" type="checkbox" id="task5">
                                            <label class="form-check-label text-light" for="task5">Schedule 1:1s with team members</label>
                                        </div>
                                        <span class="badge bg-secondary bg-opacity-25 text-secondary">Pending</span>
                                    </div>
                                </div>
                                
                                <div class="list-group-item bg-dark bg-opacity-25 border-secondary">
                                    <div class="d-flex justify-content-between align-items-center">
                                        <div class="form-check">
                                            <input class="form-check-input" type="checkbox" id="task6">
                                            <label class="form-check-label text-light" for="task6">Set up 30-60-90 day goals</label>
                                        </div>
                                        <span class="badge bg-secondary bg-opacity-25 text-secondary">Pending</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- Help Modal -->
<div class="modal fade" id="helpModal" tabindex="-1" aria-labelledby="helpModalLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content bg-dark bg-opacity-90 border-secondary">
            <div class="modal-header border-secondary">
                <h5 class="modal-title text-light" id="helpModalLabel">Need Help?</h5>
                <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
                <p class="text-light">We're here to help you get settled in! Here's how you can get assistance:</p>
                
                <div class="mb-3">
                    <h6 class="text-light"><i class="bi bi-headset text-primary me-2"></i>IT Support</h6>
                    <p class="ms-4 mb-2 text-muted">For technical issues, contact IT Support:</p>
                    <ul class="ms-4 text-muted">
                        <li>Email: <a href="mailto:it-support@company.com" class="text-primary">it-support@company.com</a></li>
                        <li>Phone: Ext. 4357 (HELP)</li>
                        <li>Hours: Mon-Fri, 8:00 AM - 6:00 PM</li>
                    </ul>
                </div>
                
                <div class="mb-3">
                    <h6 class="text-light"><i class="bi bi-person-workspace text-primary me-2"></i>HR Support</h6>
                    <p class="ms-4 mb-2 text-muted">For HR-related questions, contact:</p>
                    <ul class="ms-4 text-muted">
                        <li>Email: <a href="mailto:hr@company.com" class="text-primary">hr@company.com</a></li>
                        <li>Phone: Ext. 2000</li>
                    </ul>
                </div>
            </div>
            <div class="modal-footer border-secondary">
                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
            </div>
        </div>
    </div>
</div>
{% endblock %}

{% block extra_js %}
<script>
document.addEventListener('DOMContentLoaded', function() {
    // Start tour button
    const startTourBtn = document.getElementById('startTourBtn');
    if (startTourBtn) {
        startTourBtn.addEventListener('click', function() {
            // In a real app, this would start an interactive tour
            alert('Starting your onboarding tour! This will guide you through the key features of your employee portal.');
        });
    }

    // Handle checklist item clicks
    const checkboxes = document.querySelectorAll('input[type="checkbox"]');
    checkboxes.forEach(checkbox => {
        checkbox.addEventListener('change', function() {
            const listItem = this.closest('.list-group-item');
            if (listItem) {
                const badge = listItem.querySelector('.badge');
                if (badge) {
                    if (this.checked) {
                        badge.className = 'badge bg-success bg-opacity-25 text-success';
                        badge.textContent = 'Completed';
                    } else {
                        badge.className = 'badge bg-secondary bg-opacity-25 text-secondary';
                        badge.textContent = 'Pending';
                    }
                }
            }
        });
    });
});
</script>
{% endblock %}
